import{s as h,r as p,j as e}from"./index-Bm4W7kcw.js";import{b as N}from"./useAuth-2B9FPw-q.js";import{U as f}from"./UserListItem-9BwtUvaL.js";import{L as d}from"./Layout-D9T89pnA.js";import{h as j,C as i}from"./FollowButton-CZO9unpF.js";import{u as g}from"./users-DvomXxAS.js";function F(){const{userId:l}=h.useParams(),s=Number.parseInt(l,10),t=!Number.isNaN(s)&&s>0,{data:m}=N({queryKey:["user",s],queryFn:()=>g.getUser(s),enabled:t}),{data:a,isLoading:c,isFetchingNextPage:o,hasNextPage:x,fetchNextPage:u}=j(t?s:0),n=p.useMemo(()=>a?.pages.flatMap(r=>r.content)??[],[a]);return t?e.jsx(d,{children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h1",{className:"text-xl font-semibold",children:[m?.username??"用户","的粉丝"]})}),e.jsxs(i,{className:"overflow-hidden",children:[c?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"加载中..."}):n.length===0?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"暂无粉丝"}):e.jsx("div",{className:"divide-y",children:n.map(r=>e.jsx(f,{user:r.follower},r.id))}),x&&e.jsx("div",{className:"p-4 border-t",children:e.jsx("button",{type:"button",onClick:()=>u(),disabled:o,className:"w-full py-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:o?"加载中...":"加载更多"})})]})]})}):e.jsx(d,{children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(i,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"无效的用户 ID"})})})})}export{F as component};
