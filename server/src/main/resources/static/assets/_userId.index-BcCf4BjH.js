import{o as g,e as f,r as v,j as e,B as b}from"./index-Bm4W7kcw.js";import{u as F,b as w}from"./useAuth-2B9FPw-q.js";import{C as t,F as I}from"./FollowButton-CZO9unpF.js";import{F as U}from"./FollowStats-DyW8fLez.js";import{L as r,A as y,d as P,e as A,S as L}from"./Layout-D9T89pnA.js";import{F as C}from"./Feed-DBOQaBDA.js";import{a as M}from"./useUsers-CYmB-Sqt.js";import{u as S}from"./users-DvomXxAS.js";import"./CodeBlock-C7OKY8nB.js";function Q(){const{userId:c}=g.useParams(),s=Number.parseInt(c,10),n=!Number.isNaN(s)&&s>0,{user:m}=F(),x=f(),i=m?.id===s,{data:a,isLoading:d}=w({queryKey:["user",s],queryFn:()=>S.getUser(s),enabled:n}),{data:l,isLoading:u,isFetchingNextPage:h,hasNextPage:j,fetchNextPage:p}=M(n?s:0),o=v.useMemo(()=>l?.pages.flatMap(N=>N.content)??[],[l]);return n?d?e.jsx(r,{children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(t,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"加载中..."})})})}):a?e.jsx(r,{children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(y,{className:"h-24 w-24 ring-4 ring-border/30",children:[e.jsx(P,{src:a.avatarUrl||void 0,alt:a.username}),e.jsx(A,{className:"text-2xl font-medium",children:a.username.slice(0,2).toUpperCase()})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl font-semibold",children:a.username}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:o.length>0?`${l?.pages[0]?.totalElements??0} 篇内容`:"暂无内容"})]}),e.jsx(U,{userId:s}),i?e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>x({to:"/settings"}),children:[e.jsx(L,{className:"mr-1.5 h-4 w-4"}),"编辑资料"]}):e.jsx(I,{userId:s})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:i?"我的内容":`${a.username} 的内容`}),e.jsx(C,{posts:o,isLoading:u,isFetchingNextPage:h,hasNextPage:j,fetchNextPage:p,emptyMessage:i?"你还没有发布任何内容":"该用户还没有发布任何内容"})]})]})})}):e.jsx(r,{children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(t,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"用户不存在"})})})}):e.jsx(r,{children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsx(t,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"无效的用户 ID"})})})})}export{Q as component};
